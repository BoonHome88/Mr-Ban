<!-- ...‡∏™‡πà‡∏ß‡∏ô head ‡πÅ‡∏•‡∏∞ CSS ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°... -->

<body>
  <div class="card">
    <h2>üì¢ ‡∏™‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ô</h2>
    <form id="banForm">
      <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ô</label>
      <select id="banType" required>
        <option value="‡∏ñ‡∏≤‡∏ß‡∏£">üî¥ ‡∏ñ‡∏≤‡∏ß‡∏£</option>
        <option value="‡πÉ‡∏ö‡πÅ‡∏î‡∏á">üî¥ ‡πÉ‡∏ö‡πÅ‡∏î‡∏á</option>
        <option value="‡πÉ‡∏ö‡∏™‡πâ‡∏°">üü† ‡πÉ‡∏ö‡∏™‡πâ‡∏°</option>
        <option value="‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á">üü° ‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á</option>
        <option value="‡∏õ‡∏£‡∏±‡∏ö">üí∏ ‡∏õ‡∏£‡∏±‡∏ö</option>
      </select>

      <label>‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡πÄ‡∏Å‡∏°</label>
      <input type="text" id="name" required />

      <label>Discord ID</label>
      <input type="text" id="discord" required placeholder="‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ID Discord" />
      <button type="button" id="lookupBtn">üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Discord ID</button>
      <div id="discordInfo" style="margin-top:10px;"></div>

      <label>Steam Hex</label>
      <input type="text" id="steamhex" placeholder="steam:1100001xxxxxxx" required />

      <label>‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (Reason)</label>
      <textarea id="reason" rows="3" required></textarea>

      <label>‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö</label>
      <input type="text" id="fine" value="0 IC" />

      <label>‡∏ú‡∏π‡πâ‡πÅ‡∏ö‡∏ô</label>
      <input type="text" id="admin" required />

      <button type="button" id="previewBtn">üîç ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
      <button type="submit">üöÄ ‡∏™‡πà‡∏á‡πÑ‡∏õ Discord</button>
    </form>
  </div>

  <div class="preview" id="previewBox" style="display: none;">
    <h2>üëÄ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Embed</h2>
    <div class="embed" id="embedPreview"></div>
  </div>

  <script>
    const DISCORD_WEBHOOK_URL =
      "https://discord.com/api/webhooks/1390666314716287007/gjFpxeI2T5Tx6odcZBSkftTLxhEtt8kCDIOTn1l35sOE09Kghp6ZtqxcktTNz4qAeGqB";
    const BACKEND_URL = "https://mr-ban-production.up.railway.app";

    const form = document.getElementById("banForm");
    const previewBtn = document.getElementById("previewBtn");
    const previewBox = document.getElementById("previewBox");
    const embedPreview = document.getElementById("embedPreview");
    const lookupBtn = document.getElementById("lookupBtn");
    const discordInfo = document.getElementById("discordInfo");

    const colorMap = {
      "‡∏ñ‡∏≤‡∏ß‡∏£": { emoji: "üî¥", hex: 0xff0000, color: "red" },
      "‡πÉ‡∏ö‡πÅ‡∏î‡∏á": { emoji: "üî¥", hex: 0xff0000, color: "red" },
      "‡πÉ‡∏ö‡∏™‡πâ‡∏°": { emoji: "üü†", hex: 0xffa500, color: "orange" },
      "‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á": { emoji: "üü°", hex: 0xffff00, color: "yellow" },
      "‡∏õ‡∏£‡∏±‡∏ö": { emoji: "üí∏", hex: 0x00ff00, color: "green" },
    };

    async function getDiscordAvatar(discordId) {
      try {
        const res = await fetch(`${BACKEND_URL}/${discordId}`);
        const data = await res.json();
        return data.avatar;
      } catch {
        return `https://cdn.discordapp.com/embed/avatars/${discordId % 5}.png`;
      }
    }

    async function lookupDiscordUser() {
      const discordId = document.getElementById("discord").value.trim();
      if (!discordId) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà Discord ID");

      try {
        const res = await fetch(`https://discord.com/api/v10/users/${discordId}`, {
          headers: { Authorization: "Bot YOUR_BOT_TOKEN_HERE" }
        });

        if (!res.ok) throw new Error("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ");

        const data = await res.json();
        const avatarUrl = data.avatar
          ? `https://cdn.discordapp.com/avatars/${discordId}/${data.avatar}.png?size=128`
          : `https://cdn.discordapp.com/embed/avatars/${discordId % 5}.png`;

        discordInfo.innerHTML = `
          <div style="display:flex;align-items:center;gap:10px;">
            <img src="${avatarUrl}" width="48" height="48" style="border-radius:50%;border:2px solid #7289da;">
            <div>
              <div><strong>Username:</strong> ${data.username}#${data.discriminator}</div>
              <div><strong>Bot:</strong> ${data.bot ? "‡πÉ‡∏ä‡πà" : "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"}</div>
            </div>
          </div>
        `;
      } catch (error) {
        console.error(error);
        discordInfo.innerHTML = `<span style="color:red;">‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠ Discord Bot Token ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</span>`;
      }
    }

    lookupBtn.addEventListener("click", lookupDiscordUser);

    async function updatePreview() {
      const name = document.getElementById("name").value;
      const discord = document.getElementById("discord").value;
      const steam = document.getElementById("steamhex").value;
      const reason = document.getElementById("reason").value;
      const fine = document.getElementById("fine").value;
      const admin = document.getElementById("admin").value;
      const banType = document.getElementById("banType").value;
      const avatarUrl = await getDiscordAvatar(discord);

      embedPreview.innerHTML = `
        <div class="embed-header">
          <img src="${avatarUrl}" class="avatar">
          <h3>${colorMap[banType].emoji} ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏ö <span style="color:${colorMap[banType].color}">${banType}</span></h3>
        </div>
        <div class="embed-field"><div class="embed-field-name">Name</div><div class="embed-field-value">${name}</div></div>
        <div class="embed-field"><div class="embed-field-name">Discord ID</div><div class="embed-field-value">@${discord}</div></div>
        <div class="embed-field"><div class="embed-field-name">Steam Hex</div><div class="embed-field-value">${steam}</div></div>
        <div class="embed-field"><div class="embed-field-name">Reason</div><div class="embed-field-value">${reason}</div></div>
        <div class="embed-field"><div class="embed-field-name">‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö</div><div class="embed-field-value">${fine}</div></div>
        <div class="embed-field"><div class="embed-field-name">‡∏ú‡∏π‡πâ‡πÅ‡∏ö‡∏ô</div><div class="embed-field-value">${admin}</div></div>
        <div class="embed-footer">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏°‡∏∑‡πà‡∏≠ | ${new Date().toLocaleString('th-TH')} | ‡πÇ‡∏î‡∏¢ [${admin}] MR System</div>
      `;

      previewBox.style.display = "block";
      previewBox.scrollIntoView({ behavior: "smooth" });
    }

    previewBtn.addEventListener("click", updatePreview);

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      await updatePreview();

      const name = document.getElementById("name").value;
      const discord = document.getElementById("discord").value;
      const steam = document.getElementById("steamhex").value;
      const reason = document.getElementById("reason").value;
      const fine = document.getElementById("fine").value;
      const admin = document.getElementById("admin").value;
      const banType = document.getElementById("banType").value;
      const avatarUrl = await getDiscordAvatar(discord);

      const payload = {
        embeds: [
          {
            title: "üì¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ô",
            color: colorMap[banType].hex,
            thumbnail: { url: avatarUrl },
            fields: [
              { name: "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó", value: banType, inline: true },
              { name: "‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡πÄ‡∏Å‡∏°", value: name, inline: true },
              { name: "Discord ID", value: discord, inline: true },
              { name: "Steam Hex", value: steam, inline: true },
              { name: "‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•", value: reason, inline: false },
              { name: "‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö", value: fine, inline: true },
              { name: "‡∏ú‡∏π‡πâ‡πÅ‡∏ö‡∏ô", value: admin, inline: true },
            ],
            timestamp: new Date(),
          },
        ],
      };

      try {
        const response = await fetch(DISCORD_WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        if (response.ok) {
          alert("‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ Discord ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
          form.reset();
          previewBox.style.display = "none";
          discordInfo.innerHTML = "";
        } else {
          alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
        }
      } catch (error) {
        console.error(error);
        alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Discord");
      }
    });
  </script>

  <footer>
    <p>&copy; 2025 MOO TEDET99. All rights reserved.</p>
  </footer>
</body>
</html>

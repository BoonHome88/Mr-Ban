<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üì¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ô | Midnight Racing</title>
<style>
    :root {
        --primary-color: #4a90e2;
        --bg-color: #1e1e1e;
        --card-color: #2b2b2b;
        --text-color: #ffffff;
        --accent-color: #ff4444;
    }

    body {
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: "Segoe UI", sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
    }

    h1 {
        margin-top: 40px;
        color: var(--primary-color);
    }

    form {
        background-color: var(--card-color);
        padding: 20px 25px;
        border-radius: 16px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        width: 90%;
        max-width: 500px;
        margin-bottom: 30px;
    }

    label {
        display: block;
        margin: 10px 0 5px;
        font-weight: 600;
    }

    input, textarea, select {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: none;
        outline: none;
        background: #333;
        color: #fff;
    }

    button {
        width: 100%;
        background: var(--primary-color);
        color: white;
        font-size: 16px;
        font-weight: bold;
        border: none;
        padding: 12px;
        margin-top: 15px;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.2s;
    }

    button:hover {
        background: #357ABD;
    }

    .preview {
        background: #2f3136;
        padding: 16px;
        border-radius: 12px;
        width: 90%;
        max-width: 500px;
        color: #dcddde;
    }

    .embed-header {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }

    .embed-header img {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        margin-left: auto;
    }

    .field {
        margin: 5px 0;
    }

    footer {
        margin-top: auto;
        padding: 10px;
        color: #aaa;
        font-size: 14px;
    }
</style>
</head>
<body>

<h1>üì¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ô</h1>

<form id="banForm">
    <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
    <select id="banType">
        <option value="‡∏ñ‡∏≤‡∏ß‡∏£">‡∏ñ‡∏≤‡∏ß‡∏£</option>
        <option value="‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß">‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß</option>
    </select>

    <label>‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡πÄ‡∏Å‡∏°</label>
    <input type="text" id="name" required>

    <label>Discord ID</label>
    <input type="text" id="discord" required>

    <label>Steam Hex</label>
    <input type="text" id="steam" required>

    <label>‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•</label>
    <textarea id="reason" rows="3" required></textarea>

    <label>‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö</label>
    <input type="text" id="fine" required>

    <label>‡∏ú‡∏π‡πâ‡πÅ‡∏ö‡∏ô</label>
    <input type="text" id="admin" required>

    <button type="submit">‡∏™‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</button>
</form>

<div class="preview" id="previewBox">
    <div class="embed-header">
        <h3>üì¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ô</h3>
        <img id="avatarPreview" src="https://cdn.discordapp.com/embed/avatars/0.png" alt="Avatar">
    </div>
    <div id="embedContent">
        <div class="field"><b>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</b> -</div>
        <div class="field"><b>‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡πÄ‡∏Å‡∏°:</b> -</div>
        <div class="field"><b>Discord ID:</b> -</div>
        <div class="field"><b>Steam Hex:</b> -</div>
        <div class="field"><b>‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:</b> -</div>
        <div class="field"><b>‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö:</b> -</div>
        <div class="field"><b>‡∏ú‡∏π‡πâ‡πÅ‡∏ö‡∏ô:</b> -</div>
    </div>
</div>

<footer>¬© 2025 Midnight Racing | ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ô</footer>

<script>
const BACKEND_URL = "https://your-railway-url.up.railway.app"; // üîß ‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô URL Backend ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
const WEBHOOK_URL = "YOUR_DISCORD_WEBHOOK_URL_HERE"; // üîß ‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô Webhook Discord ‡∏à‡∏£‡∏¥‡∏á

const form = document.getElementById("banForm");
const preview = document.getElementById("embedContent");
const avatarImg = document.getElementById("avatarPreview");

form.addEventListener("input", updatePreview);
form.addEventListener("submit", sendWebhook);

async function getAvatar(discordId) {
    try {
        const res = await fetch(`${BACKEND_URL}/${discordId}`);
        const data = await res.json();
        if (data.avatar) return data.avatar;
        return `https://cdn.discordapp.com/embed/avatars/${discordId % 5}.png`;
    } catch {
        return `https://cdn.discordapp.com/embed/avatars/${discordId % 5}.png`;
    }
}

async function updatePreview() {
    const name = document.getElementById("name").value || "-";
    const discord = document.getElementById("discord").value || "-";
    const steam = document.getElementById("steam").value || "-";
    const reason = document.getElementById("reason").value || "-";
    const fine = document.getElementById("fine").value || "-";
    const admin = document.getElementById("admin").value || "-";
    const banType = document.getElementById("banType").value;

    preview.innerHTML = `
        <div class="field"><b>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</b> ${banType}</div>
        <div class="field"><b>‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡πÄ‡∏Å‡∏°:</b> ${name}</div>
        <div class="field"><b>Discord ID:</b> ${discord}</div>
        <div class="field"><b>Steam Hex:</b> ${steam}</div>
        <div class="field"><b>‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:</b> ${reason}</div>
        <div class="field"><b>‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö:</b> ${fine}</div>
        <div class="field"><b>‡∏ú‡∏π‡πâ‡πÅ‡∏ö‡∏ô:</b> ${admin}</div>
    `;

    if (discord && discord.length > 10) {
        avatarImg.src = await getAvatar(discord);
    }
}

async function sendWebhook(e) {
    e.preventDefault();
    const banType = document.getElementById("banType").value;
    const name = document.getElementById("name").value;
    const discord = document.getElementById("discord").value;
    const steam = document.getElementById("steam").value;
    const reason = document.getElementById("reason").value;
    const fine = document.getElementById("fine").value;
    const admin = document.getElementById("admin").value;

    const avatarUrl = await getAvatar(discord);

    const payload = {
        embeds: [{
            title: "üì¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ô",
            color: banType === "‡∏ñ‡∏≤‡∏ß‡∏£" ? 0xff0000 : 0xffa500,
            thumbnail: { url: avatarUrl },
            fields: [
                { name: "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó", value: banType, inline: true },
                { name: "‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡πÄ‡∏Å‡∏°", value: name, inline: true },
                { name: "Discord ID", value: discord, inline: true },
                { name: "Steam Hex", value: steam, inline: false },
                { name: "‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•", value: reason, inline: false },
                { name: "‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö", value: fine, inline: true },
                { name: "‡∏ú‡∏π‡πâ‡πÅ‡∏ö‡∏ô", value: admin, inline: true },
                { name: "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà", value: new Date().toLocaleString('th-TH'), inline: false }
            ]
        }]
    };

    await fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
    });

    alert("‚úÖ ‡∏™‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
    form.reset();
    updatePreview();
}
</script>
</body>
</html>
